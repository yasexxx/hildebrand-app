(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{bZSD:function(t,e,n){"use strict";n.r(e),n.d(e,"LoginModule",function(){return k});var o=n("fXoL"),i=n("3Pt+"),s=n("8rb8"),r=n("ofXK"),c=n("ahC7"),a=n("7Vn+"),b=n("YiLq"),g=n("tyNb"),l=n("FDOz");function d(t,e){1&t&&(o.Wb(0,"div",24),o.Wb(1,"div",25),o.Wb(2,"span",26),o.Pc(3,"Loading..."),o.Vb(),o.Vb(),o.Vb())}function h(t,e){if(1&t&&(o.Wb(0,"div",27),o.Pc(1),o.Vb()),2&t){const t=o.lc();o.Db(1),o.Rc(" ",t.errorMessage," ")}}const u=function(){return["/register"]},p=[{path:"",component:(()=>{class t{constructor(t,e,n,o,s,r){this.authService=t,this.oAuthService=e,this.tokenStack=n,this.fb=o,this.router=s,this.platformId=r,this.loginForm=this.fb.group({username:["",i.x.required],password:["",i.x.required]}),this.isLoggedIn=!1,this.isLoggedFailed=!1,this.errorMessage="",this.isLoading=this.authService.loading$}ngOnInit(){this.subscription3$=this.oAuthService.authState.subscribe(t=>{this.user=t,this.loggedIn=null!=t,this.loggedIn&&this.checkOauthApi(this.user)}),Object(r.F)(this.platformId)&&(this.subscription$=this.tokenStack.getToken().subscribe(t=>{t&&(this.isLoggedIn=!0,this.roles=this.tokenStack.getUser().roles)}))}ngOnDestroy(){this.subscription$&&this.subscription$.unsubscribe(),this.subscription2$&&this.subscription2$.unsubscribe(),this.subscription3$&&this.subscription3$.unsubscribe(),this.subscription4$&&this.subscription4$.unsubscribe(),this.authService.ngOnDestroy()}checkOauthApi(t){this.subscription4$=this.authService.socialLogin(t).subscribe(t=>{this.tokenStack.saveToken(t.accessToken),this.tokenStack.saveUser(t),this.isLoggedFailed=!1,this.isLoggedIn=!0,this.roles=this.tokenStack.getUser().roles,this.reloadPage()},t=>{})}onSubmit(){Object(r.F)(this.platformId)&&(this.subscription2$=this.authService.login(this.loginForm.value).subscribe(t=>{t.accessToken?(this.tokenStack.saveToken(t.accessToken),this.tokenStack.saveUser(t),this.isLoggedFailed=!1,this.isLoggedIn=!0,this.roles=this.tokenStack.getUser().roles,this.reloadPage()):(this.errorMessage="Login invalid! Please try again.",this.isLoggedFailed=!0)},t=>{this.errorMessage="Login failed! Try again.",this.isLoggedFailed=!0}))}reloadPage(){this.router.navigateByUrl("**",{skipLocationChange:!0}).then(()=>{this.router.navigate([""])})}signInWithGoogle(){this.oAuthService.signIn(c.b.PROVIDER_ID)}signInWithFb(){this.oAuthService.signIn(c.a.PROVIDER_ID)}get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(a.a),o.Qb(c.c),o.Qb(b.a),o.Qb(i.d),o.Qb(g.g),o.Qb(o.F))},t.\u0275cmp=o.Kb({type:t,selectors:[["app-login"]],features:[o.Cb([s.a])],decls:41,vars:9,consts:[[1,"container-a-login"],[1,"card","card-a-center"],[1,"card-header"],[1,"text-white",2,"font-size","15px"],[1,"card-body","bg-light"],[1,"col","justify-content-center"],["class","spin-1",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],["type","username","name","username","id","username","formControlName","username","required","",1,"form-control"],["for","password"],["type","password","name","password","id","password","formControlName","password","required","",1,"form-control"],["class","alert alert-danger",4,"ngIf"],[1,"not-login"],[3,"routerLink"],["type","submit",1,"btn-1","btn-dark","btn-block","btn-login","my-4","ml-auto"],[1,"login-with"],[1,"social-login"],[1,"btn-1","btn-google",3,"click"],[1,"google-g",3,"src"],[1,"p-0","p-sm-2"],[1,"btn-1","btn-facebook",3,"click"],[1,"facebook-f",3,"src"],[1,"spin-1"],["role","status",1,"spinner-grow","text-dark"],[1,"sr-only"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Rb(1,"br"),o.Wb(2,"div",1),o.Wb(3,"div",2),o.Wb(4,"span",3),o.Pc(5,"Login:"),o.Vb(),o.Vb(),o.Wb(6,"div",4),o.Wb(7,"div",5),o.Nc(8,d,4,0,"div",6),o.mc(9,"async"),o.Wb(10,"form",7),o.hc("ngSubmit",function(){return e.onSubmit()}),o.Wb(11,"div",8),o.Wb(12,"label",9),o.Pc(13,"Username: "),o.Vb(),o.Rb(14,"input",10),o.Vb(),o.Wb(15,"div",8),o.Wb(16,"label",11),o.Pc(17,"Password: "),o.Vb(),o.Rb(18,"input",12),o.Vb(),o.Nc(19,h,2,1,"div",13),o.Wb(20,"div",14),o.Pc(21," No account yet? "),o.Wb(22,"a",15),o.Pc(23,"Click here."),o.Vb(),o.Vb(),o.Wb(24,"button",16),o.Pc(25," Login "),o.Vb(),o.Vb(),o.Rb(26,"hr"),o.Wb(27,"div",17),o.Pc(28," Login with "),o.Vb(),o.Wb(29,"div",18),o.Wb(30,"button",19),o.hc("click",function(){return e.signInWithGoogle()}),o.Rb(31,"img",20),o.Wb(32,"span"),o.Pc(33,"Google"),o.Vb(),o.Vb(),o.Wb(34,"div",21),o.Pc(35,"\xa0"),o.Vb(),o.Wb(36,"button",22),o.hc("click",function(){return e.signInWithFb()}),o.Rb(37,"img",23),o.Wb(38,"span"),o.Pc(39,"Facebook"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Rb(40,"br"),o.Vb()),2&t&&(o.Db(8),o.tc("ngIf",o.nc(9,6,e.isLoading)),o.Db(2),o.tc("formGroup",e.loginForm),o.Db(9),o.tc("ngIf",e.isLoggedFailed),o.Db(3),o.tc("routerLink",o.wc(8,u)),o.Db(9),o.tc("src","assets/images/google-g.webp",o.Fc),o.Db(6),o.tc("src","assets/images/facebook-f.webp",o.Fc))},directives:[r.o,i.z,i.o,i.g,i.c,i.n,i.f,i.v,g.i,l.c],pipes:[r.b],styles:[".container-a-login[_ngcontent-%COMP%]{background:url(/hildebrand-app/assets/images/login.webp);background-size:cover;background-position-y:1;min-height:120vh}.card-a-center[_ngcontent-%COMP%]{margin:5rem auto;width:32em}.card-header[_ngcontent-%COMP%]{background:#002447}.spin-1[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;display:flex;justify-content:center;align-items:center;top:0;left:0;background-color:hsla(0,0%,100%,.5);z-index:998}.spin-1[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:6rem;height:6rem}.not-login[_ngcontent-%COMP%]{display:flex;column-gap:.3rem}.not-login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00f}.not-login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#4f4fd8;text-decoration:underline}.btn-login[_ngcontent-%COMP%]{width:10rem}.social-login[_ngcontent-%COMP%]{display:flex}.btn-1[_ngcontent-%COMP%]{text-align:center;border-radius:2px;border:1px solid;vertical-align:middle;cursor:pointer;font-size:.8rem;width:100%;letter-spacing:.3px;height:40px}.btn-google[_ngcontent-%COMP%]{border-color:#c4c4c4;background:#fff;color:#484848;margin-bottom:10px;opacity:1!important;position:relative}.btn-google[_ngcontent-%COMP%]:hover{background-color:#eee}.btn-facebook[_ngcontent-%COMP%]{border-color:#3d5a98 #3d5a98 #263a63;background-color:#3b5998;color:#fff!important;opacity:1!important;position:relative}.btn-facebook[_ngcontent-%COMP%]:hover{background-color:#4568b2}.facebook-f[_ngcontent-%COMP%]{width:10px}.facebook-f[_ngcontent-%COMP%], .google-g[_ngcontent-%COMP%]{position:absolute;left:10px;top:12px}.google-g[_ngcontent-%COMP%]{width:15px}.login-with[_ngcontent-%COMP%]{text-align:center;padding-bottom:1rem}@media (max-width:486px){.card-a-center[_ngcontent-%COMP%]{width:80vw}}@media (max-width:380px){.social-login[_ngcontent-%COMP%]{flex-direction:column}}"]}),t})()}];let m=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[r.c,g.j.forChild(p)],g.j]}),t})();var f=n("PCNd");let k=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[r.c,m,f.a]]}),t})()}}]);